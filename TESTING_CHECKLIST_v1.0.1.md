# MCU Log Debugger v1.0.1 测试清单

## 📋 测试准备
- [ ] 启动应用：`npm run tauri dev`
- [ ] 启动虚拟串口：`socat -d -d pty,raw,echo=0 pty,raw,echo=0`
- [ ] 启动日志模拟器：`python3 test_log_simulator.py --port /dev/ttys??? --scenario continuous`

---

## 1️⃣ 模式切换功能测试

### 1.1 基础切换
- [ ] 点击 **Log** 按钮，界面切换到结构化日志显示
- [ ] 点击 **HEX** 按钮，界面切换到十六进制显示
- [ ] 点击 **Normal** 按钮，界面切换到纯文本显示
- [ ] 模式指示器滑动动画流畅
- [ ] 当前激活模式按钮高亮显示

### 1.2 快捷键测试
- [ ] 按 `Cmd/Ctrl + 1`，切换到 Log 模式
- [ ] 按 `Cmd/Ctrl + 2`，切换到 HEX 模式
- [ ] 按 `Cmd/Ctrl + 3`，切换到 Normal 模式
- [ ] 快捷键与按钮点击效果一致

### 1.3 模式显示测试

#### Log 模式
- [ ] 显示序号、时间戳、级别、Tag、消息列
- [ ] 级别徽章颜色正确（VERBOSE/DEBUG/INFO/WARN/ERROR）
- [ ] Tag 显示正确
- [ ] 消息内容完整显示
- [ ] 可以隐藏时间戳/级别/Tag 列
- [ ] 隐藏列后表头和表体对齐

#### HEX 模式
- [ ] 显示地址偏移（格式：`0000`、`0010`、`0020`...）
- [ ] HEX 数据每16字节一行
- [ ] HEX 数据每8字节一组，中间有空格分隔
- [ ] ASCII 对照显示在右侧，格式：`|...|`
- [ ] 可打印字符正常显示，不可打印字符显示为 `.`
- [ ] 字体为等宽字体，对齐整齐

#### Normal 模式
- [ ] 显示原始日志行（不解析）
- [ ] 每行一条消息
- [ ] 字体为等宽字体
- [ ] 支持自动换行（点击换行按钮）

### 1.4 模式持久化
- [ ] 切换模式后刷新页面，模式保持不变
- [ ] 重启应用后，模式保持上次选择

---

## 2️⃣ 视图锁定功能测试

### 2.1 搜索触发锁定
- [ ] 在搜索框输入关键词（如 `ERROR`）
- [ ] 视图自动锁定，右下角显示锁定通知卡片
- [ ] 锁定原因显示：`🔍 搜索中`
- [ ] 锁定按钮图标变为 `🔒`
- [ ] 新消息到达时，消息列表不滚动
- [ ] 新消息计数器累加（如：`5`、`10`、`15`...）
- [ ] 清空搜索框，视图自动解锁

### 2.2 滚动触发锁定
- [ ] 手动向上滚动消息列表
- [ ] 视图自动锁定，锁定原因显示：`✋ 手动浏览`
- [ ] 新消息到达时，消息列表不滚动
- [ ] 新消息计数器累加
- [ ] 滚动到底部，视图自动解锁

### 2.3 自动滚动关闭触发锁定
- [ ] 点击工具栏的 **自动滚动** 按钮，关闭自动滚动
- [ ] 视图自动锁定，锁定原因显示：`✋ 手动浏览`
- [ ] 新消息到达时，消息列表不滚动
- [ ] 新消息计数器累加
- [ ] 重新开启自动滚动，视图自动解锁

### 2.4 手动锁定/解锁
- [ ] 点击工具栏的 **锁定** 按钮（🔓）
- [ ] 视图锁定，按钮图标变为 `🔒`
- [ ] 锁定原因显示：`🔒 已锁定`
- [ ] 新消息到达时，消息列表不滚动
- [ ] 新消息计数器累加
- [ ] 再次点击锁定按钮，视图解锁
- [ ] 按 `Cmd/Ctrl + L`，切换锁定状态

### 2.5 锁定通知卡片
- [ ] 锁定时，右下角显示通知卡片
- [ ] 卡片显示锁定图标、原因、新消息计数器
- [ ] 点击卡片上的 **解锁** 按钮，视图解锁
- [ ] 解锁后，卡片消失
- [ ] 卡片有滑入/滑出动画

### 2.6 解锁后行为
- [ ] 解锁后，如果开启了自动滚动，自动滚动到底部
- [ ] 解锁后，新消息计数器归零
- [ ] 解锁后，消息列表恢复正常滚动

---

## 3️⃣ 设置入口优化测试

### 3.1 设置按钮位置
- [ ] 设置按钮（⚙️）显示在右上角标题栏
- [ ] 设置按钮在主题切换按钮左侧
- [ ] 侧边栏底部不再显示设置按钮

### 3.2 设置按钮交互
- [ ] 点击设置按钮，弹出设置模态框
- [ ] 设置模态框内容完整（保存路径、导出格式、自动保存间隔）
- [ ] 设置功能正常工作

---

## 4️⃣ 综合场景测试

### 4.1 模式切换 + 视图锁定
- [ ] 在 Log 模式下锁定视图，切换到 HEX 模式，锁定状态保持
- [ ] 在 HEX 模式下锁定视图，切换到 Normal 模式，锁定状态保持
- [ ] 在锁定状态下切换模式，新消息计数器保持累加

### 4.2 搜索 + 模式切换
- [ ] 在 Log 模式下搜索关键词，切换到 HEX 模式，搜索高亮消失（符合预期）
- [ ] 在 HEX 模式下切换回 Log 模式，搜索框内容保留，但需要重新搜索

### 4.3 大数据量测试
- [ ] 连续接收 1000+ 条日志
- [ ] 在 Log 模式下流畅显示
- [ ] 在 HEX 模式下流畅显示（每条消息可能有多行）
- [ ] 在 Normal 模式下流畅显示
- [ ] 虚拟滚动正常工作（只渲染最近 300 条）

### 4.4 过滤 + 锁定
- [ ] 应用级别过滤（如只显示 ERROR）
- [ ] 锁定视图
- [ ] 新消息到达时，只有符合过滤条件的消息计入计数器

---

## 5️⃣ UI/UX 测试

### 5.1 动画流畅性
- [ ] 模式切换指示器滑动流畅
- [ ] 锁定通知卡片滑入/滑出流畅
- [ ] 按钮 hover 效果流畅

### 5.2 响应式布局
- [ ] 缩小窗口宽度，模式切换器正常显示
- [ ] 缩小窗口宽度，锁定通知卡片不遮挡内容
- [ ] 缩小窗口宽度，HEX 模式横向滚动条出现

### 5.3 主题切换
- [ ] 在浅色主题下，所有新功能显示正常
- [ ] 在深色主题下，所有新功能显示正常
- [ ] 颜色对比度良好，可读性强

---

## 6️⃣ 兼容性测试

### 6.1 原有功能
- [ ] 串口连接/断开正常
- [ ] 日志解析正常
- [ ] 级别过滤正常
- [ ] Tag 过滤正常
- [ ] 关键词搜索正常
- [ ] 书签功能正常
- [ ] 导出功能正常
- [ ] 自动保存功能正常
- [ ] 发送数据功能正常

### 6.2 快捷键冲突
- [ ] 新增快捷键（Cmd+1/2/3/L）不与原有快捷键冲突
- [ ] 原有快捷键（Cmd+F、Cmd+K 等）仍然正常工作

---

## 7️⃣ 边界情况测试

### 7.1 空数据
- [ ] 未连接串口时，模式切换正常
- [ ] 未连接串口时，锁定/解锁正常
- [ ] 清空日志后，模式切换正常

### 7.2 异常数据
- [ ] 接收非 UTF-8 字符，HEX 模式正常显示
- [ ] 接收超长行（1000+ 字符），HEX 模式正常显示（多行）
- [ ] 接收二进制数据，HEX 模式正常显示

### 7.3 快速操作
- [ ] 快速连续切换模式（5次/秒），不卡顿
- [ ] 快速连续锁定/解锁（5次/秒），不卡顿
- [ ] 快速输入搜索关键词，不卡顿

---

## ✅ 测试通过标准

- [ ] 所有核心功能正常工作
- [ ] 无明显 UI 错位或显示异常
- [ ] 无 JavaScript 错误（打开浏览器控制台检查）
- [ ] 性能流畅，无明显卡顿
- [ ] 用户体验良好，交互符合预期

---

## 🐛 发现的问题

### 问题 1
- **描述**：
- **重现步骤**：
- **预期行为**：
- **实际行为**：
- **优先级**：P0 / P1 / P2

### 问题 2
- **描述**：
- **重现步骤**：
- **预期行为**：
- **实际行为**：
- **优先级**：P0 / P1 / P2

---

**测试人员**：  
**测试日期**：  
**测试环境**：macOS / Windows / Linux  
**测试结果**：通过 / 不通过
