# MCU Log Debugger v1.0.1 UI 改进计划

## 🎨 设计目标

1. **现代化** - 符合 2026 年设计趋势
2. **直观性** - 降低学习曲线
3. **高效性** - 快速访问常用功能
4. **一致性** - 与主流应用保持一致
5. **美观性** - 视觉愉悦

---

## 📐 整体布局改进

### 当前布局
```
┌─────────────────────────────────────────────────┐
│  MCU Log Debugger                    🌙         │ 标题栏
├────────┬────────────────────────────────────────┤
│        │  [工具栏]                              │
│        ├────────────────────────────────────────┤
│  侧边栏 │  [统计栏]                              │
│        ├────────────────────────────────────────┤
│  过滤   │                                        │
│  发送   │  [日志表格]                            │
│  书签   │                                        │
│        │                                        │
│  [设置] │                                        │
└────────┴────────────────────────────────────────┘
```

### 改进布局
```
┌─────────────────────────────────────────────────┐
│  MCU Log Debugger          🌙  ⚙️  ❓  ✕      │ 标题栏（添加图标）
├────────┬────────────────────────────────────────┤
│        │  [📝 Log] [🔢 HEX] [📄 Normal]  [工具] │ 模式切换 + 工具栏
│        ├────────────────────────────────────────┤
│  📊    │  [连接状态] [速率] [统计] [搜索框]      │ 增强状态栏
│  过滤   ├────────────────────────────────────────┤
│        │                                        │
│  📤    │  [日志显示区域]                        │ 主显示区
│  发送   │                                        │
│        │                                        │
│  📖    │                                        │
│  书签   ├────────────────────────────────────────┤
│        │  [状态信息] [进度] [提示]               │ 底部状态栏
└────────┴────────────────────────────────────────┘
```

---

## 🎯 关键改进点

### 1. 标题栏右上角图标 ⭐

**当前**: 只有主题切换按钮

**改进**: 添加功能图标组

```
┌─────────────────────────────────────────────────┐
│  MCU Log Debugger          🌙  ⚙️  ❓  ✕      │
└─────────────────────────────────────────────────┘
                              │   │   │   │
                              │   │   │   └─ 关闭
                              │   │   └───── 帮助
                              │   └───────── 设置 ⭐
                              └───────────── 主题切换
```

**设计规范**:
- 图标大小: 20x20px
- 间距: 12px
- 悬停效果: 放大 1.1x + 颜色高亮
- Tooltip: 显示功能名称和快捷键

**实现细节**:
```css
.title-bar-icons {
    display: flex;
    gap: 12px;
    align-items: center;
}

.title-icon {
    width: 20px;
    height: 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-secondary);
}

.title-icon:hover {
    transform: scale(1.1);
    color: var(--primary);
}
```

---

### 2. 模式切换器 ⭐⭐⭐

**位置**: 工具栏最左侧
**类型**: 分段控制器（Segmented Control）

**设计方案 A - 紧凑型**:
```
┌──────────────────────────────────┐
│  📝 Log  │  🔢 HEX  │  📄 Normal │
└──────────────────────────────────┘
```

**设计方案 B - 图标型**:
```
┌─────────────────────┐
│  📝  │  🔢  │  📄  │
└─────────────────────┘
```

**推荐**: 方案 A（图标 + 文字）

**状态**:
- 未选中: 灰色背景，次要文字颜色
- 选中: 主色背景，白色文字
- 悬停: 轻微高亮

**动画**:
- 切换时背景滑动动画
- 过渡时间: 200ms
- 缓动函数: ease-in-out

**CSS 实现**:
```css
.mode-switcher {
    display: flex;
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    padding: 2px;
    position: relative;
}

.mode-option {
    padding: 6px 16px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: 1;
}

.mode-option.active {
    color: white;
}

.mode-indicator {
    position: absolute;
    background: var(--primary);
    border-radius: var(--radius-sm);
    transition: transform 0.2s ease-in-out;
    z-index: 0;
}
```

---

### 3. 工具栏优化

**当前工具栏**:
```
[滚动到底部] [自动换行] [增大字体] [减小字体]
[自动滚动] [时间戳] [级别] [Tag] [HEX] [位置] [自动保存]
```

**改进工具栏**:
```
[模式切换器] [🔒 锁定] | [清空] [暂停] [恢复] | [导出] | [搜索框]
```

**分组设计**:
1. **模式组**: 模式切换器、视图锁定
2. **操作组**: 清空、暂停、恢复
3. **功能组**: 导出
4. **搜索组**: 搜索框

**按钮设计**:
- 图标 + 文字（可配置只显示图标）
- 统一大小: 32x32px
- 圆角: 6px
- 悬停: 背景色变化

---

### 4. 增强状态栏

**当前状态栏**:
```
[统计信息] [搜索框]
```

**改进状态栏**:
```
[连接状态] [速率: ↓1.2KB/s ↑0.5KB/s] [统计] [进度条] [搜索]
```

**组件详细**:

**4.1 连接状态指示器**
```
● 已连接 COM3 @ 115200  或  ○ 未连接
```
- 绿点: 已连接
- 灰点: 未连接
- 红点: 连接错误
- 黄点: 正在连接

**4.2 速率显示**
```
↓ 1.2 KB/s  ↑ 0.5 KB/s
```
- 实时更新（每秒）
- 自动单位转换（B/KB/MB）
- 点击显示详细统计

**4.3 统计信息**
```
📊 DEBUG: 120 | INFO: 450 | WARN: 23 | ERROR: 5 | 总计: 598
```
- 紧凑显示
- 颜色编码
- 点击展开详细

**4.4 进度条**
```
[████████░░] 80% 正在接收...
```
- 显示长时间操作进度
- 例如: 导出、搜索、加载

---

### 5. 侧边栏改进

**当前侧边栏**:
- 固定宽度
- 不可折叠
- 单一内容

**改进侧边栏**:

**5.1 标签页设计**
```
┌────────────────┐
│ 📊 │ 📤 │ 📖 │
├────────────────┤
│                │
│  [内容区域]    │
│                │
└────────────────┘
```
- 📊 过滤
- 📤 发送
- 📖 书签

**5.2 可调整宽度**
- 拖动边缘调整
- 最小宽度: 200px
- 最大宽度: 400px
- 记住用户偏好

**5.3 折叠功能**
- 点击图标折叠/展开
- 折叠后只显示图标
- 快捷键: Cmd/Ctrl + B

---

### 6. 日志显示区域

**6.1 Log 模式**

**当前**:
```
# | 时间 | 级别 | Tag | 消息 | 操作
```

**改进**:
- 添加行号（可选）
- 列宽可调整
- 列可隐藏/显示
- 双击复制整行
- 右键菜单增强

**6.2 HEX 模式** ⭐

**布局设计**:
```
地址      | 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F | ASCII
----------|--------------------------------------------------|--------
00000000  | 5B 30 30 3A 30 30 3A 30 30 2E 30 30 30 5D 20 5B | [00:00:00.000] [
00000010  | 49 4E 46 4F 5D 20 5B 4D 41 49 4E 5D 20 53 79 73 | INFO] [MAIN] Sys
00000020  | 74 65 6D 20 69 6E 69 74 69 61 6C 69 7A 65 64 0A | tem initialized.
```

**特性**:
- 地址偏移显示
- 16 字节一行（可配置 8/16/32）
- ASCII 对照
- 选中高亮
- 不可打印字符显示为 `.`

**6.3 Normal 模式** ⭐

**特性**:
- 纯文本显示
- 类似终端效果
- 支持 ANSI 颜色码（可选）
- 自动换行
- 无格式化

---

### 7. 底部状态栏

**新增底部状态栏**:
```
┌─────────────────────────────────────────────────┐
│ ● 已连接 | ↓1.2KB/s | 598条日志 | 内存: 45MB    │
└─────────────────────────────────────────────────┘
```

**内容**:
- 连接状态
- 速率
- 日志数量
- 内存使用
- 提示信息

---

## 🎨 视觉设计规范

### 颜色系统

**主色**:
```css
--primary: #3B82F6;          /* 蓝色 */
--primary-hover: #2563EB;
--primary-light: #DBEAFE;
```

**功能色**:
```css
--success: #10B981;          /* 绿色 - 成功 */
--warning: #F59E0B;          /* 橙色 - 警告 */
--error: #EF4444;            /* 红色 - 错误 */
--info: #3B82F6;             /* 蓝色 - 信息 */
```

**日志级别色**:
```css
--level-debug: #6B7280;      /* 灰色 */
--level-info: #3B82F6;       /* 蓝色 */
--level-warn: #F59E0B;       /* 橙色 */
--level-error: #EF4444;      /* 红色 */
```

### 间距系统

```css
--spacing-xs: 4px;
--spacing-sm: 8px;
--spacing-md: 16px;
--spacing-lg: 24px;
--spacing-xl: 32px;
```

### 圆角系统

```css
--radius-xs: 4px;
--radius-sm: 6px;
--radius-md: 8px;
--radius-lg: 12px;
--radius-xl: 16px;
```

### 阴影系统

```css
--shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
--shadow-md: 0 4px 6px rgba(0,0,0,0.1);
--shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
```

### 字体系统

```css
--font-size-xs: 11px;
--font-size-sm: 12px;
--font-size-md: 13px;
--font-size-lg: 14px;
--font-size-xl: 16px;

--font-mono: 'SF Mono', 'Consolas', 'Monaco', monospace;
--font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
```

---

## 🎬 动画和过渡

### 过渡时间

```css
--transition-fast: 150ms;
--transition-base: 200ms;
--transition-slow: 300ms;
```

### 缓动函数

```css
--ease-in: cubic-bezier(0.4, 0, 1, 1);
--ease-out: cubic-bezier(0, 0, 0.2, 1);
--ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
```

### 常用动画

**淡入淡出**:
```css
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
```

**滑入**:
```css
@keyframes slideIn {
    from { transform: translateY(-10px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
```

**脉冲**:
```css
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
```

---

## 📱 响应式设计

### 断点

```css
--breakpoint-sm: 768px;   /* 平板 */
--breakpoint-md: 1024px;  /* 小桌面 */
--breakpoint-lg: 1280px;  /* 大桌面 */
```

### 适配策略

**小屏幕 (< 768px)**:
- 侧边栏自动折叠
- 工具栏只显示图标
- 统计信息简化

**中等屏幕 (768px - 1024px)**:
- 侧边栏可选折叠
- 工具栏图标 + 文字
- 完整功能

**大屏幕 (> 1024px)**:
- 完整布局
- 所有功能可见
- 更多信息展示

---

## ⌨️ 快捷键设计

### 全局快捷键

```
Cmd/Ctrl + K         - 清空日志
Cmd/Ctrl + F         - 搜索
Cmd/Ctrl + ,         - 设置
Cmd/Ctrl + S         - 保存/导出
Cmd/Ctrl + B         - 切换侧边栏
Cmd/Ctrl + /         - 帮助
```

### 模式切换

```
Cmd/Ctrl + 1         - Log 模式
Cmd/Ctrl + 2         - HEX 模式
Cmd/Ctrl + 3         - Normal 模式
```

### 导航

```
Cmd/Ctrl + G         - 跳转到行
Cmd/Ctrl + ↑         - 滚动到顶部
Cmd/Ctrl + ↓         - 滚动到底部
Cmd/Ctrl + [         - 上一个书签
Cmd/Ctrl + ]         - 下一个书签
```

### 发送

```
Cmd/Ctrl + Enter     - 发送数据
Cmd/Ctrl + Shift + Enter - 发送并换行
```

---

## 🔧 实现优先级

### P0 - v1.0.1 必须实现
- ✅ 设置图标移至右上角
- ✅ 模式切换器
- ✅ HEX 模式布局
- ✅ Normal 模式布局
- ✅ 视图锁定功能 ⭐

### P1 - v1.0.1 应该实现
- ⚠️ 工具栏优化
- ⚠️ 增强状态栏
- ⚠️ 快捷键支持

### P2 - v1.1.0
- 📋 侧边栏标签页
- 📋 可调整宽度
- 📋 底部状态栏

---

## 📐 设计稿

### 模式切换器原型

```
┌──────────────────────────────────────┐
│                                      │
│  [📝 Log] [🔢 HEX] [📄 Normal]      │
│   ▔▔▔▔▔                              │
│                                      │
└──────────────────────────────────────┘
```

### HEX 模式原型

```
┌──────────────────────────────────────────────────────┐
│ 地址     | HEX 数据                          | ASCII │
├──────────┼───────────────────────────────────┼───────┤
│ 00000000 | 5B 30 30 3A 30 30 3A 30 30 2E 30 | [00:00│
│ 00000010 | 30 30 5D 20 5B 49 4E 46 4F 5D 20 | 00] [I│
│ 00000020 | 5B 4D 41 49 4E 5D 20 53 79 73 74 | [MAIN]│
└──────────┴───────────────────────────────────┴───────┘
```

---

## 🔗 相关文档

- [开发路线图](ROADMAP.md)
- [功能评审](FEATURE_REVIEW.md)
- [技术实现细节](TECHNICAL_DETAILS.md)

---

**最后更新**: 2026-02-08
**设计师**: UI/UX 团队
**状态**: 📐 设计中
